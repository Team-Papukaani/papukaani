{% extends 'base.html' %}
{% load i18n %}

{% load staticfiles %}

{% block header %}
    <link rel="stylesheet" type="text/css" href="{% static 'papukaani/css/individuals.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'papukaani/libraries/bootstrap/bootstrap-combobox.css' %}">
{% endblock %}

{% block content %}
    {% include "papukaaniApp/navigation.html" %}

    {% include "papukaaniApp/include_scripts.html" %}

    <div id="delete_confirm_popup" class="overlay" hidden="true">
      <p>{% trans "Haluatko varmasti poistaa linnun?" %}</p>

      <button id="yes_button" class="btn btn-default">{% trans "Kyll√§" %}</button>
      <button id="cancel_button" class="btn btn-default">{% trans "Peruuta" %}</button>
    </div>

    <h1>{% trans "Luo lintu" %}</h1>

    <form id="new_individual_form" class="form-inline" action='{% url "individuals" %}' method="post">
        {% csrf_token %}

        <input class="form-control" type="text" name="nickname" id="new_individual_nickname" placeholder="Nimi"/>

        <select class="form-control combobox" name="taxon" id="new_individual_taxon">
            <option></option>

            {% for s in species %}
                <option value="{{ s.id }}">{{ s.name }}</option>
            {% endfor %}
        </select>

        <button type="submit" class="btn btn-default">{% trans "Luo" %}</button>
    </form>

    <h1>{% trans "Muokkaa lintua" %}</h1>
    {% for individual in individuals %}
        <form name="modify_individuals" class="form-inline" action='{% url "individuals" %}' method="post">
            {% csrf_token %}

            <input type="hidden" name="id" value="{{ individual.id }}"/>

<input class="form-control" type="text" name="nickname" placeholder="{% trans 
Nimi' %}" value="{{ individual.nickname }}"/>
<input class="form-control" type="text" name="ring_id" placeholder="{% trans 'Rengastunnus' %}" value="{{ individual.ringID }}"/>

            <select class="form-control combobox" name="taxon" placeholder="{% trans "Laji" %}">
                <option></option>
                {% for s in species %}
                    <option value="{{ s.id }}" {% if individual.taxon == s.id %} selected{% endif %}>{{ s.name }}</option>
                {% endfor %}
            </select>

            <button type="submit" name="modify" value="1" class="btn btn-default">{% trans "Tallenna" %}</button>
            <button type="button" name="delete" onclick="confirm(this.form)" class="btn btn-danger">{% trans "Poista" %}</button>
        </form>
        <br>
    {% endfor %}

    <p id="messages">
        {% for message in messages %}
            {{ message }}
        {% endfor %}
    </p>

    <script src="{% static 'papukaani/libraries/bootstrap/bootstrap-combobox.js' %}"></script>
    <script src="{% static 'papukaani/js/individuals.js' %}"></script>
{% endblock %}
