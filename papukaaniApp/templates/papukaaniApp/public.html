{% extends extended %}
{% load i18n %}

{% load staticfiles %}

{% block header %}
    <link rel="stylesheet" href="{% static 'papukaani/libraries/leaflet/leaflet.css' %}"/>
    <link rel="stylesheet" href="{% static 'papukaani/libraries/jquery/jquery-ui/jquery-ui.css' %}">
    <link rel="stylesheet" href="{% static 'papukaani/libraries/jquery/jquery-ui-timepicker-addon.css' %}">
    <link rel="stylesheet" href="{% static 'papukaani/libraries/leaflet/markercluster/MarkerCluster.css' %}"/>
    <link rel="stylesheet" href="{% static 'papukaani/libraries/leaflet/markercluster/MarkerCluster.Default.css' %}"/>
{% endblock %}

{% autoescape off %}
{% block body_attr %} onload='var map = init({{ individuals }}, {{ species }}, {{ device }}, "{{ speed }}", {{ loc }},
    {{ zoom }}, "{{ start_time }}", "{{ end_time }}")'{% endblock %}
{% endautoescape %}

{% block footer %}{% endblock %}

{% block content %}

    <div class="container-fluid" id="mapContainer">
        <div class="row no-gutters" style="height:100%;">
            <div class="col-sm-12 col-md-9 col-lg-10" style="height:100%;">
                <div id="map" tabindex="1"></div>

                <div id="timeline">
                    <div class="row no-gutters">
                        <div class="col-xs-3">
                            <div class="choose_actions form-inline padded2">
                                <div id="birds">
                                    <select id="selectIndividual"><option value="">Lis채채 lintu</option></select>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-9">
                            <div class="row no-gutters">
                                <div class="col-xs-6">
                                    <button id="play" onclick="player.play()" class="btn btn-default">
                                        &#9658;</button>
                                    <img id="speedLabel" src="{% static 'papukaaniApp/speed.svg' %}"
                                         alt="{% trans "Nopeus" %}"
                                         width="30"
                                         height="30"/>
                                    <div id="speedSlider" class="small-slider" data-toggle="tooltip"
                                         title="{% trans "Nopeus" %}"
                                         data-placement="top"></div>
                                </div>
                                <div class="col-xs-3">
                                    <label id="playLabel">N/A</label>
                                </div>
                                <div class="col-xs-3">
                                    <label id="playLabel_end">N/A</label>
                                </div>
                            </div>
                            <div class="row no-gutters">
                                <div class="col-xs-10">
                                    <div class="input-group" id="time_range">
                                        <span class="input-group-addon" id="basic-addon1">{% trans "Alku:" %}</span>
                                        <input type="text" id="start_time" name="start_time"
                                               class="dateinput datepicker form-control"
                                               onblur="validateDateFormat(this)"
                                               placeholder="dd-mm-yyyy HH:mm" maxlength="16">
                                            <span class="input-group-addon"
                                                  id="basic-addon1">{% trans "Loppu:" %}</span>
                                        <input type="text" id="end_time" name="end_time"
                                               class="dateinput datepicker form-control"
                                               onblur="validateDateFormat(this)"
                                               placeholder="dd-mm-yyyy HH:mm" maxlength="16">
                                    </div>
                                </div>
                                <div class="col-xs-2">
                                    <button type="button" class="btn btn-default" onclick="sorter.refresh()"
                                            id="show_time_range">{% trans "P채ivit채 " %}</button>
                                    <span id="formatError" style="margin:0"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="birdies"></div>
                    <div class="row no-gutters">
                        <div class="col-xs-3">

                        </div>
                        <div class="col-xs-9">
                            <div id="playSlider"></div>
                            <span id="loading" style="display:inline"></span>
                        </div>
                    </div>
                    <div class="row no-gutters">
                        <div class="col-xs-3">

                        </div>
                        <div class="col-xs-9">
                            <div class="choose_actions form-inline padded2">
                                <div class="input-group">
                                    <span class="input-group-addon">iFrame</span>
                                    <input class="form-control" type="text" size="100" id="iframeSrc"/>
                                </div>

                                <div class="input-group">
                                    <button type="button" class="btn btn-primary" onclick="generateIframeUrl()"
                                            id="generateIframeButton">{% trans "Luo" %}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="hidden-sm col-md-3 col-lg-2">
                <div id="nyheter">
                    <h1>Nyhe
                        34534
                        543534
                        543
                        5345
                        43534
                        5435345345
                        435435
                        435
                        435
                        435
                        435
                        435435ter</h1>a sdfasf
                </div>
            </div>
        </div>
    </div>

{% endblock %}
{% block scripts %}
    <script src="{% static 'papukaani/libraries/jquery/jquery-ui/jquery-ui.js' %}"></script>
    <script src="{% static 'papukaani/libraries/jquery/jquery-dateFormat.min.js' %}"></script>
    <script src="{% static 'papukaani/libraries/jquery/sliderPadding.js' %}"></script>
    <script src="{% static 'papukaani/libraries/leaflet/leaflet.js' %}"></script>
    <script src="{% static 'papukaani/libraries/leaflet/markercluster/leaflet.markercluster.js' %}"></script>
    <script src="{% static 'papukaani/libraries/jquery/jquery-ui/jquery-ui-timepicker-addon.js' %}"></script>
    {% trans "fi" as lang %}
    <script src="{% static 'papukaani/libraries/jquery/jquery-ui/jquery-ui-timepicker-'|add:lang|add:'.js' %}"></script>
    <script src="{% static 'papukaani/js/map.js' %}"></script>
    <script src="{% static 'papukaani/js/utils/datetimepicker.js' %}"></script>
    <script src="{% static 'papukaani/js/utils/datepicker-'|add:lang|add:'.js' %}"></script>
    <script src="{% static 'papukaani/js/utils/polylineAnimate.js' %}"></script>
    <script src="{% static 'papukaani/libraries/leaflet/polylinedecorator/leaflet.polylineDecorator.js' %}"></script>
    <script src="{% static 'papukaani/js/utils/player.js' %}"></script>
    <script src="{% static 'papukaani/libraries/victor.min.js' %}"></script>
    <script src="{% static 'papukaani/js/public.js' %}"></script>
{% endblock %}